<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>COCORO SHOP | ì ‘ìˆ˜ ì¡°íšŒ</title>
  <style>
    :root{
      --bg1:#fff7fb; --bg2:#f6fbff;
      --card:rgba(255,255,255,.92);
      --text:#111827; --muted:#6b7280; --line:#e5e7eb;
      --accent:#e56aa6; --accent2:#7aa7ff;
      --shadow: 0 14px 48px rgba(17,24,39,.10);
      --radius: 18px;

      --season-overlay-opacity:.18;
      --season-glow-1: rgba(229,106,166,.16);
      --season-glow-2: rgba(122,167,255,.14);
      --season-glow-3: rgba(255,210,225,.12);
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      color:var(--text);
      font-family:-apple-system,BlinkMacSystemFont,"Apple SD Gothic Neo","Noto Sans KR",Segoe UI,Roboto,sans-serif;
      background:
        radial-gradient(900px 600px at 12% 12%, rgba(229,106,166,.16), transparent 60%),
        radial-gradient(900px 600px at 88% 18%, rgba(122,167,255,.14), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      min-height:100vh;
    }
    body::before{
      content:"";
      position:fixed;
      inset:-40px;
      pointer-events:none;
      z-index:-1;
      opacity: var(--season-overlay-opacity, .18);
      background:
        radial-gradient(900px 600px at 12% 12%, var(--season-glow-1, rgba(229,106,166,.16)), transparent 60%),
        radial-gradient(900px 600px at 88% 18%, var(--season-glow-2, rgba(122,167,255,.14)), transparent 60%),
        radial-gradient(900px 600px at 70% 90%, var(--season-glow-3, rgba(255,210,225,.12)), transparent 60%);
    }
    .wrap{ width:min(760px,92vw); margin:30px auto 64px; }

    .hero{ padding:14px 8px 10px; position:relative; }
    .top-actions{ position:absolute; right:6px; top:10px; display:flex; gap:10px; }
    .btn-top{
      display:inline-flex; align-items:center; gap:8px;
      border:1px solid rgba(229,106,166,.35);
      background: rgba(255,255,255,.75);
      backdrop-filter: blur(10px);
      padding:10px 14px; border-radius:14px;
      font-weight:950; color:#b84a84; cursor:pointer; text-decoration:none;
    }

    .brand-row{ display:flex; align-items:center; gap:12px; margin-bottom:10px; }
    .mono{
      width:44px;height:44px;border-radius:16px;
      background:linear-gradient(135deg, rgba(229,106,166,.95), rgba(122,167,255,.95));
      box-shadow:0 14px 30px rgba(229,106,166,.16);
      display:flex; align-items:center; justify-content:center;
      color:#fff; font-weight:950; letter-spacing:.8px; position:relative; overflow:hidden;
    }
    .mono::after{ content:""; position:absolute; inset:-40%;
      background:radial-gradient(circle at 30% 30%, rgba(255,255,255,.35), transparent 45%);
      transform:rotate(12deg);
    }
    .mono span{ position:relative; z-index:1; font-size:18px; }
    .brand-name{ font-weight:950; letter-spacing:1px; font-size:14px; opacity:.95; }
    .title{ margin:8px 0 6px; font-size:clamp(28px,4.8vw,40px); font-weight:980; letter-spacing:-.5px; }
    .subtitle{ margin:0; color:var(--muted); line-height:1.7; font-size:14.5px; }

    .card{
      margin-top:14px; background:var(--card); backdrop-filter: blur(10px);
      border:1px solid rgba(229,231,235,.78); box-shadow:var(--shadow);
      border-radius:var(--radius); overflow:hidden;
    }
    .card-top{
      padding:14px 18px; border-bottom:1px solid rgba(229,231,235,.78);
      background:linear-gradient(90deg, rgba(229,106,166,.09), rgba(122,167,255,.08));
      color:var(--muted); font-size:13.2px; line-height:1.55;
    }
    .form{ padding:18px; }
    label{ font-size:14px; font-weight:950; }
    input{
      width:100%; border:1px solid var(--line); border-radius:14px;
      padding:12px 12px; font-size:16px; outline:none; background:#fff;
    }
    input:focus{ border-color:rgba(229,106,166,.55); box-shadow:0 0 0 4px rgba(229,106,166,.13); }
    .row{ display:flex; gap:10px; align-items:center; margin-top:8px; }
    .row > *{ flex:1; }

    .btn{
      border:none; border-radius:14px; padding:12px 14px;
      font-size:16px; font-weight:950; cursor:pointer; min-height:48px;
      background:linear-gradient(135deg, var(--accent), var(--accent2));
      color:#fff; box-shadow:0 12px 24px rgba(229,106,166,.16);
      white-space:nowrap;
    }
    .status{ margin-top:12px; font-size:14px; line-height:1.5; min-height:22px; color:var(--muted); }
    .status.bad{ color:#b91c1c; font-weight:950; }
    .status.ok{ color:#0f766e; font-weight:950; }

    .result{
      margin-top:14px; padding:14px; border-radius:16px;
      border:1px solid rgba(229,231,235,.9); background:#fff;
    }
    .kv{ display:grid; grid-template-columns:120px 1fr; gap:10px; }
    .k{ color:var(--muted); font-weight:950; }
    .v{ font-weight:980; }

    @media (max-width:640px){
      .wrap{ margin:18px auto 46px; }
      .form{ padding:16px; }
      .row{ flex-direction:column; align-items:stretch; }
      .top-actions{ position:static; margin-bottom:12px; justify-content:flex-end; }
    }

/* ì¡°íšŒ ë²„íŠ¼ì„ ê³ ì •í­(ì£¼ì†Œ ì°¾ê¸° ë²„íŠ¼ ëŠë‚Œ)ìœ¼ë¡œ */
.btn-query{
  flex: 0 0 auto;     /* rowì—ì„œ ëŠ˜ì–´ë‚˜ì§€ ì•Šê²Œ */
  width: 140px;       /* ì£¼ì†Œì°¾ê¸°ë‘ ë™ì¼í•˜ê²Œ */
  padding: 12px 12px;
}

/* ëª¨ë°”ì¼ì—ì„œëŠ” ë²„íŠ¼ì´ ì•„ë˜ë¡œ ë‚´ë ¤ê°€ë©´ 100% */
@media (max-width: 640px){
  .btn-query{
    width: 100%;
  }
}
    
  </style>
</head>
<body>
  <div class="wrap">
    <header class="hero">
      <div class="top-actions">
        <a class="btn-top" href="./index.html">ğŸ“¦ ë°°ì†¡ ì •ë³´ ì…ë ¥</a>
      </div>

      <div class="brand-row">
        <div class="mono"><span>C</span></div>
        <div>
          <div class="brand-name">COCORO SHOP</div>
        </div>
      </div>

      <h1 class="title">ì ‘ìˆ˜ ì¡°íšŒ</h1>
      <p class="subtitle">ì ‘ìˆ˜ë²ˆí˜¸ë¡œ í˜„ì¬ ì²˜ë¦¬ ìƒíƒœ / ì†¡ì¥ë²ˆí˜¸ë¥¼ í™•ì¸í•  ìˆ˜ ìˆì–´ìš”.</p>
    </header>

    <section class="card">
      <div class="card-top">
        ğŸ’¡ ì ‘ìˆ˜ë²ˆí˜¸ëŠ” ì ‘ìˆ˜ì¦ì— ì í˜€ ìˆì–´ìš”. (ì ‘ìˆ˜ë²ˆí˜¸ë§Œ ì…ë ¥í•˜ë©´ ë©ë‹ˆë‹¤)
      </div>

      <div class="form">
        <label for="receipt">ì ‘ìˆ˜ë²ˆí˜¸</label>
        <div class="row">
          <input id="receipt" type="text" placeholder="ì˜ˆ: 260301-144727-ê¹€ë¯¸ì˜-2839" />
          <button id="btn" class="btn btn-query" type="button">ì¡°íšŒ</button>
        </div>

        <div id="status" class="status"></div>
        <div id="result" class="result" style="display:none;"></div>
      </div>
    </section>
  </div>

  <script>
    // ===== Monthly Theme (auto) =====
    (function applyMonthlyTheme(){
      const m = new Date().getMonth() + 1;
      const root = document.documentElement;

      const base = {
        '--bg1': '#fff7fb',
        '--bg2': '#f6fbff',
        '--accent': '#e56aa6',
        '--accent2': '#7aa7ff',
        '--season-overlay-opacity': '.18',
        '--season-glow-1': 'rgba(229,106,166,.16)',
        '--season-glow-2': 'rgba(122,167,255,.14)',
        '--season-glow-3': 'rgba(255,210,225,.12)',
      };

      const themes = {
        1: {'--bg1':'#fbfcff','--bg2':'#f4f7ff','--accent':'#6b7cff','--accent2':'#c3d0ff','--season-glow-1':'rgba(107,124,255,.14)','--season-glow-2':'rgba(195,208,255,.18)','--season-glow-3':'rgba(240,244,255,.18)'},
        2: {'--bg1':'#fff6fb','--bg2':'#f7fbff','--accent':'#e56aa6','--accent2':'#ffb6c9','--season-glow-1':'rgba(229,106,166,.18)','--season-glow-2':'rgba(255,182,201,.18)','--season-glow-3':'rgba(200,230,255,.12)'},
        3: {'--bg1':'#fff7f3','--bg2':'#f5fbff','--accent':'#d86bb9','--accent2':'#ffb38a','--season-glow-1':'rgba(216,107,185,.16)','--season-glow-2':'rgba(255,179,138,.14)','--season-glow-3':'rgba(186,235,255,.12)'},
        4: {'--bg1':'#fff3f8','--bg2':'#fffdf6','--accent':'#e46b9a','--accent2':'#ffd3e1','--season-glow-1':'rgba(228,107,154,.16)','--season-glow-2':'rgba(255,211,225,.22)','--season-glow-3':'rgba(255,245,219,.18)'},
        5: {'--bg1':'#f3fff7','--bg2':'#f5fbff','--accent':'#2fb7a3','--accent2':'#7aa7ff','--season-glow-1':'rgba(47,183,163,.14)','--season-glow-2':'rgba(122,167,255,.12)','--season-glow-3':'rgba(190,255,225,.14)'},
        6: {'--bg1':'#f4fffe','--bg2':'#f5f6ff','--accent':'#6c7bff','--accent2':'#35c9c0','--season-glow-1':'rgba(108,123,255,.14)','--season-glow-2':'rgba(53,201,192,.14)','--season-glow-3':'rgba(200,210,255,.14)'},
        7: {'--bg1':'#f2fbff','--bg2':'#f6fffe','--accent':'#1aa7d7','--accent2':'#35c9c0','--season-glow-1':'rgba(26,167,215,.14)','--season-glow-2':'rgba(53,201,192,.14)','--season-glow-3':'rgba(175,240,255,.14)'},
        8: {'--bg1':'#fff6f0','--bg2':'#f2fbff','--accent':'#ff8a7a','--accent2':'#5aa6ff','--season-glow-1':'rgba(255,138,122,.14)','--season-glow-2':'rgba(90,166,255,.12)','--season-glow-3':'rgba(255,210,175,.12)'},
        9: {'--bg1':'#fffaf2','--bg2':'#f7f2ff','--accent':'#a56bd8','--accent2':'#f2c79a','--season-glow-1':'rgba(165,107,216,.12)','--season-glow-2':'rgba(242,199,154,.14)','--season-glow-3':'rgba(255,241,210,.16)'},
        10:{'--bg1':'#fff7f0','--bg2':'#fffdf6','--accent':'#d26a4a','--accent2':'#f2c79a','--season-glow-1':'rgba(210,106,74,.14)','--season-glow-2':'rgba(242,199,154,.14)','--season-glow-3':'rgba(255,235,210,.16)'},
        11:{'--bg1':'#fff6f7','--bg2':'#f7f2ef','--accent':'#a8566a','--accent2':'#caa07a','--season-glow-1':'rgba(168,86,106,.14)','--season-glow-2':'rgba(202,160,122,.14)','--season-glow-3':'rgba(245,230,218,.16)'},
        12:{'--bg1':'#fff7fb','--bg2':'#f4f7ff','--accent':'#e11d48','--accent2':'#7aa7ff','--season-glow-1':'rgba(225,29,72,.12)','--season-glow-2':'rgba(122,167,255,.12)','--season-glow-3':'rgba(255,210,225,.12)'},
      };

      const t = { ...base, ...(themes[m] || {}) };
      Object.entries(t).forEach(([k,v]) => root.style.setProperty(k, v));
    })();

    const API_URL = "/api/status";

    function setStatus(msg, type){
      const el = document.getElementById("status");
      el.classList.remove("bad","ok");
      if(type) el.classList.add(type);
      el.textContent = msg || "";
    }

    function setResult(data){
      const box = document.getElementById("result");
      if(!data){ box.style.display="none"; box.innerHTML=""; return; }
      box.style.display="block";
      box.innerHTML = `
        <div class="kv">
          <div class="k">ì ‘ìˆ˜ë²ˆí˜¸</div><div class="v">${data.receipt || ""}</div>
          <div class="k">ì²˜ë¦¬ìƒíƒœ</div><div class="v">${data.status || ""}</div>
          <div class="k">ì†¡ì¥ë²ˆí˜¸</div><div class="v">${data.trackingNumber || "ë¯¸ë“±ë¡"}</div>
        </div>
      `;
    }

    function getReceiptFromHash(){
      const hash = (location.hash || "").replace(/^#/, "");
      if(!hash) return "";
      const params = new URLSearchParams(hash);
      return (params.get("receipt") || "").trim();
    }

    async function doQuery(){
      setResult(null);
      const receipt = (document.getElementById("receipt").value || "").trim();
      if(!receipt){
        setStatus("ì ‘ìˆ˜ë²ˆí˜¸ë¥¼ ì…ë ¥í•´ì£¼ì„¸ìš”.", "bad");
        return;
      }

      const btn = document.getElementById("btn");
      btn.disabled = true;
      setStatus("ì¡°íšŒ ì¤‘ì…ë‹ˆë‹¤â€¦", "");

      try{
        const res = await fetch(`${API_URL}?receipt=${encodeURIComponent(receipt)}`);
        const data = await res.json().catch(()=> ({}));
        if(res.ok){
          setStatus("âœ… ì¡°íšŒ ì™„ë£Œ", "ok");
          setResult(data);
        }else{
          setStatus(`âŒ ${data.error || "ì¡°íšŒ ì‹¤íŒ¨"}`, "bad");
        }
      }catch{
        setStatus("âŒ ë„¤íŠ¸ì›Œí¬ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆì–´ìš”. ì ì‹œ í›„ ë‹¤ì‹œ ì‹œë„í•´ì£¼ì„¸ìš”.", "bad");
      }finally{
        btn.disabled = false;
      }
    }

    document.getElementById("btn").addEventListener("click", doQuery);
    document.getElementById("receipt").addEventListener("keydown", (e)=>{
      if(e.key === "Enter"){ e.preventDefault(); doQuery(); }
    });

    const fromHash = getReceiptFromHash();
    if(fromHash){
      document.getElementById("receipt").value = fromHash;
      doQuery();
    }
  </script>
</body>
</html>
